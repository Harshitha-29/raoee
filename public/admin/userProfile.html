<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="../assets/img/apple-icon.png"
    />
    <link id="favicon" rel="icon" type="image/png" href="../assets/img/favicon.png" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>RAOEE</title>
    <meta
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no"
      name="viewport"
    />
    <!--     Fonts and icons     -->
    <link
      href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.7.1/css/all.css"
      integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr"
      crossorigin="anonymous"
    />
    <link
      href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- CSS Files -->
    <link href="../assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../assets/css/now-ui-dashboard.css?v=1.5.0" rel="stylesheet" />
    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link href="../assets/demo/demo.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/bbbootstrap/libraries@main/choices.min.css"
    />
    <script src="https://cdn.jsdelivr.net/gh/bbbootstrap/libraries@main/choices.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"
      integrity="sha384-tKLJeE1ALTUwtXlaGjJYM3sejfssWdAaWR2s97axw4xkiAdMzQjtOjgcyw0Y50KU"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.6.3/css/bootstrap-select.min.css"
    />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  </head>
  <style>
    .choices__inner {
      border-radius: 20px;
      background-color: transparent;
      height: 10px !important;
      overflow-y: scroll;
    }
    .ck.ck-editor__editable_inline > :last-child {
      height: 18em;
    }

    #upload {
      opacity: 0;
    }

    #upload-label {
      position: absolute;
      top: 50%;
      left: 1rem;
      transform: translateY(-50%);
    }

    .image-area {
      border: 2px dashed black;
      padding: 1rem;
      position: relative;
    }

    .image-area::before {
      content: "Uploaded image result";
      color: black;
      font-weight: bold;
      text-transform: uppercase;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 0.8rem;
      z-index: 1;
    }

    .image-area img {
      z-index: 2;
      position: relative;
    }

  </style>

  <body class="user-profile">
    <div class="wrapper">
      <div id="navigation"></div>
      <div class="main-panel" id="main-panel">
        <!-- Navbar -->
        <div id="topbar"></div>
        <!-- End Navbar -->
        <div class="panel-header panel-header-sm"></div>
        <div class="content">
          <div class="row">
            <div class="col-md-12">
              <div class="card">
                <div class="card-header" style="display: flex">
                  <h5 class="title">Employee Profile</h5>
                </div>

                <div class="card-body">
                    <div class="container rounded bg-white mt-5 mb-5">
                        <div class="row">
                            <div class="col-md-3 border-right">
                                <div class="d-flex flex-column align-items-center text-center p-3 py-5"><img class="rounded-circle mt-5" width="150px" height="150px" style="object-fit: cover;" id="eimg" src="https://st3.depositphotos.com/15648834/17930/v/600/depositphotos_179308454-stock-illustration-unknown-person-silhouette-glasses-profile.jpg">
                                  <span id="ename2" class="font-weight-bold">Loading..</span>
                                  <span id="eemail" class="text-black-50">Loading..</span><span id="gender" style="font-weight: 800;"  ></span>
                                  <br>
                                  <div >
                                    <h3>Certificates</h3>
                                    <hr/>
                                    <p>Certified By Domestic Agency :<span id="cer1" style="font-weight:700"></span></p>
                                    <p>Internationally certified : <span id="cer2" style="font-weight:700"></span></p>
                                  </div>
                                  <div class="mt-5 text-center"><button class="btn  profile-button" onclick=showCv() style="color:white;background-color: rgb(146, 44, 141);" type="button">View Resume/CV</button></div>
                                </div>
                            </div>
                            <div class="col-md-4 border-right">
                                <div class="p-3 py-5">
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <h4 class="text-right">Profile of <span id="ename"></span></h4>
                                    </div>
                                    <div class="row mt-2">
                                        <div class="col-md-6"><label class="labels">Name</label><input disabled type="text" id="fname" class="form-control" placeholder="first name" value=""></div>
                                        <div class="col-md-6"><label class="labels">Surname</label><input disabled type="text" id="lname" class="form-control" value="" placeholder="surname"></div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-md-12"><label class="labels">Mobile Number</label><input disabled type="text" id="phno" class="form-control" placeholder="enter phone number" value=""></div>
                                     
                                        <div class="col-md-6">
                                          <br>
                                          
                                          <label class="labels">Qualification</label><p id="quali">Loading ..</p>
                                          <hr/>
                                        </div>

                                        <div class="col-md-6">
                                          <br>
                                          <label class="labels">Employment Status</label><p id="empStatus">Loading ..</p>
                                          <hr/>
                                        </div>
                                    
                                        <div class="col-md-6">
                                        <br>
                                          
                                        <label class="labels">Looking For</label><p id="lookingFor">Loading ..</p>

                                        <hr/>
                                        </div>
                                        
                                        <div class="col-md-6">
                                          <br>
                                          <label class="labels">Years Of Experience</label><p id="yearExp">Loading ..</p>
                                          <hr/>
                                        </div>
                                    

                                        <div class="col-md-12"><label class="labels">Email ID</label><input disabled type="text" class="form-control" id="eemail2" placeholder="enter email id" value=""></div>
                
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-md-6"><label class="labels">Preffered Country </label><input disabled type="text" id="country" class="form-control" placeholder="country" value=""></div>
                                        <div class="col-md-6"><label class="labels">Preffered  City</label><input disabled type="text" id="city" class="form-control" value="" placeholder="state"></div>
                                        <div class="col-md-12"><label class="labels">Preffered State/Region</label>
                                          <ul id="states">
                                            
                                          </ul>
                                        </div>
                                    </div>
                                    
                                 
                                </div>
                            </div>
                            <div class="col-md-5">
                              <div class="treeview js-treeview">
                                <ul id="tree">
                                  <!-- <li>

                                    <div class="treeview__level" data-level="A">
                                      <span class="level-title">Signalling</span>
                                     
                                    </div>

                                    <ul id="sig">
                              
                                      <li>
                                        <div class="treeview__level" data-level="B">
                                          <span class="level-title">Design</span>
                                         
                                        </div>
                                        <ul id="sig_exp">
                              
                                          <li>
                                            <div class="treeview__level" data-level="C">
                                              <span class="level-title">Expertise</span>
                                              <div class="treeview__level-btns">
                                                <div class="btn btn-default btn-sm level-add"><span class="fa fa-plus"></span></div>
                                                <div class="btn btn-default btn-sm level-remove"><span class="fa fa-trash text-danger"></span></div>
                                                <div class="btn btn-default btn-sm level-same"><span>Fresher</span></div>
                                                <div class="btn btn-default btn-sm level-sub"><span>Trained</span></div>

                                                <div class="btn btn-default btn-sm level-sub"><span>Fresher & Trained</span></div>
                                                
                                              </div>
                                            </div>
                                            
                                          </li>
                              
                                          <li>
                                            <div class="treeview__level" data-level="C">
                                              <span class="level-title">Skills</span>
                                              <div class="treeview__level-btns">
                                                <div class="btn btn-default btn-sm level-add"><span class="fa fa-plus"></span></div>
                                                <div class="btn btn-default btn-sm level-remove"><span class="fa fa-trash text-danger"></span></div>
                                                <div class="btn btn-default btn-sm level-same"><span>Fresher</span></div>
                                                <div class="btn btn-default btn-sm level-sub"><span>Trained</span></div>

                                                <div class="btn btn-default btn-sm level-sub"><span>Fresher & Trained</span></div>
                                              </div>
                                            </div>
                                            <ul>
                                            </ul>
                                          </li>

                                          <li>
                                            <div class="treeview__level" data-level="C">
                                              <span class="level-title">Anot Skills</span>
                                              <div class="treeview__level-btns">
                                                <div class="btn btn-default btn-sm level-add"><span class="fa fa-plus"></span></div>
                                                <div class="btn btn-default btn-sm level-remove"><span class="fa fa-trash text-danger"></span></div>
                                                <div class="btn btn-default btn-sm level-same"><span>Fresher</span></div>
                                                <div class="btn btn-default btn-sm level-sub"><span>Trained</span></div>

                                                <div class="btn btn-default btn-sm level-sub"><span>Fresher & Trained</span></div>
                                              </div>
                                            </div>
                                            <ul>
                                            </ul>
                                          </li>
                              
                                         
                                        </ul>
                                      </li>
                              
                                      <li>
                                        <div class="treeview__level" data-level="B">
                                          <span class="level-title">Installation</span>
                                         
                                        </div>
                                        <ul>
                              
                                          <li>
                                            <div class="treeview__level" data-level="C">
                                              <span class="level-title">Expertise</span>
                                              <div class="treeview__level-btns">
                                                <div class="btn btn-default btn-sm level-add"><span class="fa fa-plus"></span></div>
                                                <div class="btn btn-default btn-sm level-remove"><span class="fa fa-trash text-danger"></span></div>
                                                <div class="btn btn-default btn-sm level-same"><span>Fresher</span></div>
                                                <div class="btn btn-default btn-sm level-sub"><span>Trained</span></div>

                                                <div class="btn btn-default btn-sm level-sub"><span>Fresher & Trained</span></div>
                                                
                                              </div>
                                            </div>
                                            
                                          </li>
                              
                                          <li>
                                            <div class="treeview__level" data-level="C">
                                              <span class="level-title">Skills</span>
                                              <div class="treeview__level-btns">
                                                <div class="btn btn-default btn-sm level-add"><span class="fa fa-plus"></span></div>
                                                <div class="btn btn-default btn-sm level-remove"><span class="fa fa-trash text-danger"></span></div>
                                                <div class="btn btn-default btn-sm level-same"><span>Fresher</span></div>
                                                <div class="btn btn-default btn-sm level-sub"><span>Trained</span></div>

                                                <div class="btn btn-default btn-sm level-sub"><span>Fresher & Trained</span></div>
                                              </div>
                                            </div>
                                            <ul>
                                            </ul>
                                          </li>
                                          <li>
                                            <div class="treeview__level" data-level="C">
                                              <span class="level-title">Anot Skills</span>
                                              <div class="treeview__level-btns">
                                                <div class="btn btn-default btn-sm level-add"><span class="fa fa-plus"></span></div>
                                                <div class="btn btn-default btn-sm level-remove"><span class="fa fa-trash text-danger"></span></div>
                                                <div class="btn btn-default btn-sm level-same"><span>Fresher</span></div>
                                                <div class="btn btn-default btn-sm level-sub"><span>Trained</span></div>

                                                <div class="btn btn-default btn-sm level-sub"><span>Fresher & Trained</span></div>
                                              </div>
                                            </div>
                                            <ul>
                                            </ul>
                                          </li>
                              
                                         
                                        </ul>
                                      </li>

                                    </ul>
                                  </li> -->

                                  <!-- <li>
                                    <div class="treeview__level" data-level="A">
                                      <span class="level-title">Telecom</span>
                                     
                                    </div>
                                    <ul>
                              
                                      <li>
                                        <div class="treeview__level" data-level="B">
                                          <span class="level-title">Design</span>
                                         
                                        </div>
                                        <ul>
                              
                                          <li>
                                            <div class="treeview__level" data-level="C">
                                              <span class="level-title">Expertise</span>
                                              <div class="treeview__level-btns">
                                                <div class="btn btn-default btn-sm level-add"><span class="fa fa-plus"></span></div>
                                                <div class="btn btn-default btn-sm level-remove"><span class="fa fa-trash text-danger"></span></div>
                                                <div class="btn btn-default btn-sm level-same"><span>Fresher</span></div>
                                                <div class="btn btn-default btn-sm level-sub"><span>Trained</span></div>

                                                <div class="btn btn-default btn-sm level-sub"><span>Fresher & Trained</span></div>
                                                
                                              </div>
                                            </div>
                                            
                                          </li>
                              
                                          <li>
                                            <div class="treeview__level" data-level="C">
                                              <span class="level-title">Skills</span>
                                              <div class="treeview__level-btns">
                                                <div class="btn btn-default btn-sm level-add"><span class="fa fa-plus"></span></div>
                                                <div class="btn btn-default btn-sm level-remove"><span class="fa fa-trash text-danger"></span></div>
                                                <div class="btn btn-default btn-sm level-same"><span>Fresher</span></div>
                                                <div class="btn btn-default btn-sm level-sub"><span>Trained</span></div>

                                                <div class="btn btn-default btn-sm level-sub"><span>Fresher & Trained</span></div>
                                              </div>
                                            </div>
                                            <ul>
                                            </ul>
                                          </li>
                                          <li>
                                            <div class="treeview__level" data-level="C">
                                              <span class="level-title">Anot Skills</span>
                                              <div class="treeview__level-btns">
                                                <div class="btn btn-default btn-sm level-add"><span class="fa fa-plus"></span></div>
                                                <div class="btn btn-default btn-sm level-remove"><span class="fa fa-trash text-danger"></span></div>
                                                <div class="btn btn-default btn-sm level-same"><span>Fresher</span></div>
                                                <div class="btn btn-default btn-sm level-sub"><span>Trained</span></div>

                                                <div class="btn btn-default btn-sm level-sub"><span>Fresher & Trained</span></div>
                                              </div>
                                            </div>
                                            <ul>
                                            </ul>
                                          </li>
                              
                                         
                                        </ul>
                                      </li>
                              
                                      <li>
                                        <div class="treeview__level" data-level="B">
                                          <span class="level-title">Installation</span>
                                         
                                        </div>
                                        <ul>
                              
                                          <li>
                                            <div class="treeview__level" data-level="C">
                                              <span class="level-title">Expertise</span>
                                              <div class="treeview__level-btns">
                                                <div class="btn btn-default btn-sm level-add"><span class="fa fa-plus"></span></div>
                                                <div class="btn btn-default btn-sm level-remove"><span class="fa fa-trash text-danger"></span></div>
                                                <div class="btn btn-default btn-sm level-same"><span>Fresher</span></div>
                                                <div class="btn btn-default btn-sm level-sub"><span>Trained</span></div>

                                                <div class="btn btn-default btn-sm level-sub"><span>Fresher & Trained</span></div>
                                                
                                              </div>
                                            </div>
                                            
                                          </li>
                              
                                          <li>
                                            <div class="treeview__level" data-level="C">
                                              <span class="level-title">Skills</span>
                                              <div class="treeview__level-btns">
                                                <div class="btn btn-default btn-sm level-add"><span class="fa fa-plus"></span></div>
                                                <div class="btn btn-default btn-sm level-remove"><span class="fa fa-trash text-danger"></span></div>
                                                <div class="btn btn-default btn-sm level-same"><span>Fresher</span></div>
                                                <div class="btn btn-default btn-sm level-sub"><span>Trained</span></div>

                                                <div class="btn btn-default btn-sm level-sub"><span>Fresher & Trained</span></div>
                                              </div>
                                            </div>
                                            <ul>
                                            </ul>
                                          </li>
                                          <li>
                                            <div class="treeview__level" data-level="C">
                                              <span class="level-title">Anot Skills</span>
                                              <div class="treeview__level-btns">
                                                <div class="btn btn-default btn-sm level-add"><span class="fa fa-plus"></span></div>
                                                <div class="btn btn-default btn-sm level-remove"><span class="fa fa-trash text-danger"></span></div>
                                                <div class="btn btn-default btn-sm level-same"><span>Fresher</span></div>
                                                <div class="btn btn-default btn-sm level-sub"><span>Trained</span></div>

                                                <div class="btn btn-default btn-sm level-sub"><span>Fresher & Trained</span></div>
                                              </div>
                                            </div>
                                            <ul>
                                            </ul>
                                          </li>
                              
                                         
                                        </ul>
                                      </li>
                                    </ul>
                                  </li> -->
                                </ul>

                                
                              </div>
                            </div>
                              
                              <!-- <template id="levelMarkup">
                                <li>
                                  <div class="treeview__level" data-level="A">
                                    <span class="level-title">Level A</span>
                                    <div class="treeview__level-btns">
                                      <div class="btn btn-default btn-sm level-add"><span class="fa fa-plus"></span></div>
                                      <div class="btn btn-default btn-sm level-remove"><span class="fa fa-trash text-danger"></span></div>
                                      <div class="btn btn-default btn-sm level-same"><span>Add Same Level</span></div>
                                      <div class="btn btn-default btn-sm level-sub"><span>Add Sub Level</span></div>
                                    </div>
                                  </div>
                                  <ul>
                                  </ul>
                                </li>
                              </template> -->
                                

                            
                            </div>
                        </div>
                    </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- footer -->
        <div id="footer"></div>
      </div>
    </div>
    <!--   Core JS Files   -->
    <script src="../assets/js/core/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.6.3/js/bootstrap-select.min.js"></script>
  </body>
  <script src="https://cdn.ckeditor.com/ckeditor5/11.0.1/classic/ckeditor.js"></script>

  <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-storage-compat.js"></script>
  <script src="./common/auth.js"></script>
  <script src="./../assets/firebase.js"></script>
  <script>
    const db = firebase.firestore();
    $(document).ready(async function () {
      // Javascript method's body can be found in assets/js/demos.js
      $("#navigation").load("commonNavigation.html");
      $("#topbar").load("topBar.html");
      $("#footer").load("footer.html");

      let userType="employee"
        let uid = window.localStorage.getItem("user")
        if (userType === "employee") {
        userType = `${userType}s`;
        }
        USER_REF = await db.collection(userType).doc(uid);
        const refDoc = await USER_REF.get();
        USER = await refDoc.data();
       
        document.title = USER.fname
        if(USER.basicInfoAdded==true){
        console.log(USER)
        $("#favicon").attr("href",USER.basicInfo.imgUrl);
        $("#ename").text(USER.fname)
        $("#ename2").text(USER.fname)
        $("#eemail").text(USER.email)
        $("#eemail2").attr('value',USER.email)
        $('#eimg').attr('src',USER.basicInfo.imgUrl)
        $("#fname").attr('value',USER.fname)
        $("#lname").attr('value',USER.lname)
        $("#phno").attr('value',USER.phone)
        document.getElementById("quali").innerHTML=USER.basicInfo.qualification
        document.getElementById("empStatus").innerHTML=USER.basicInfo.employmentStatus
        document.getElementById("lookingFor").innerHTML=USER.basicInfo.internStatus
        document.getElementById("quali").innerHTML=USER.basicInfo.qualification
        if(USER.basicInfo.gender=="Male"){
          document.getElementById("gender").innerHTML=USER.basicInfo.gender
          document.getElementById("gender").style.color="blue"
          
        }else{
          document.getElementById("gender").innerHTML=USER.basicInfo.gender
          document.getElementById("gender").style.color="pink"
        }
        document.getElementById("cer1").innerHTML=USER.basicInfo.certifiedDomestic
        document.getElementById("cer2").innerHTML=USER.basicInfo.certifiedInternationally
   
        $("#city").attr('value',USER.cv.workCity)
        $("#country").attr('value',USER.cv.workCountry)

        for(let i in USER.cv.workStates){
          document.getElementById("states").innerHTML+=`
          <li>`+USER.cv.workStates[i]+`</li>
          `
        }
        // $("#state").attr('value',USER.basicInfo.state)
        }
     
        
        for(let i  in USER.cv.verticals ){
            
            document.getElementById("tree").innerHTML+=`
            <li>
              <div class="treeview__level" data-level="V">
                <span class="level-title">`+USER.cv.verticals[i].name+`</span>
              
              </div>
              <ul id="`+USER.cv.verticals[i].id+`">
            </ul>
          </li>                
          `
        }

        for(let j in USER.cv.subVerticals ){ 
          for(let m in USER.cv.subVerticals[j].sver)
            if(USER.cv.subVerticals[j].sver){
              document.getElementById(USER.cv.verticals[j].id).innerHTML+=`
              <li >
                    <div class="treeview__level" data-level="SV" >
                      <span class="level-title">`+USER.cv.subVerticals[j].sver[m]+`</span>
                    
                    </div>
                    <ul id="`+USER.cv.verticals[j].id+`+`+USER.cv.subVerticals[j].sver[m]+`">

                    </ul>
              </li>
              `
            }    
        }
        for(let k in USER.cv.professions ){
          for(let m in USER.cv.professions[k].svers){
            
            for(let n in USER.cv.professions[k].svers[m].profs ){
             
              document.getElementById(USER.cv.verticals[k].id+`+`+USER.cv.subVerticals[k].sver[m]).innerHTML+=`
              <li >
                <div class="treeview__level2" data-level="EXP" >
                  <span class="level-title">`+USER.cv.professions[k].svers[m].profs[n].prof+`</span>
                  <div class="treeview__level-btns">
                    <div class="btn btn-default btn-sm level-add"><span class=""></span></div>
                    <div class="btn btn-default btn-sm level-remove"><span class="fr"></span></div>
                   
                    <div id="`+USER.cv.verticals[k].id+`+`+USER.cv.subVerticals[k].sver[m]+`+`+USER.cv.professions[k].svers[m].profs[n].prof+`">
                     
                      
                    </div>
                  </div>
                </div> 
              </li>
              `
            }
          }
        }    
        for(let k in USER.cv.professions ){
          for(let m in USER.cv.professions[k].svers){
            // console.log(USER.cv.expertise[k].svers[m].expertise)
            for(let n in USER.cv.professions[k].svers[m].profs ){
             
              for(let i in USER.cv.professions[k].svers[m].designations[n] ){
               if(i=="prof"){
                console.log(USER.cv.professions[k].svers[m].designations[n][i])
                document.getElementById(USER.cv.verticals[k].id+`+`+USER.cv.subVerticals[k].sver[m]+`+`+USER.cv.professions[k].svers[m].profs[n].prof).innerHTML+=`
                <div class="btn btn-default btn-sm level-same"><span>`+USER.cv.professions[k].svers[m].designations[n][i]+`</span></div>
                `
               }
              
              }
            }
          }
        }    
    });
    function showCv(){
       window.open(USER.cv.url,"_blank")
    }
    $(function() {
  let treeview = {
    resetBtnToggle: function() {
      $(".js-treeview")
        .find(".level-add")
        .find("span")
        .removeClass()
        .addClass("fa fa-plus");
      $(".js-treeview")
        .find(".level-add")
        .siblings()
        .removeClass("in");
    },
    addSameLevel: function(target) {
      let ulElm = target.closest("ul");
      let sameLevelCodeASCII = target
        .closest("[data-level]")
        .attr("data-level")
        .charCodeAt(0);
      ulElm.append($("#levelMarkup").html());
      ulElm
        .children("li:last-child")
        .find("[data-level]")
        .attr("data-level", String.fromCharCode(sameLevelCodeASCII));
    },
    addSubLevel: function(target) {
      let liElm = target.closest("li");
      let nextLevelCodeASCII = liElm.find("[data-level]").attr("data-level").charCodeAt(0) + 1;
      liElm.children("ul").append($("#levelMarkup").html());
      liElm.children("ul").find("[data-level]")
        .attr("data-level", String.fromCharCode(nextLevelCodeASCII));
    },
    removeLevel: function(target) {
      target.closest("li").remove();
      
    }
  };

  // Treeview Functions
  $(".js-treeview").on("click", ".level-add", function() {
    $(this).find("span").toggleClass("fa-plus").toggleClass("fa-times text-danger");
    $(this).siblings().toggleClass("in");
  });

  // Add same level
  $(".js-treeview").on("click", ".level-same", function() {
    treeview.addSameLevel($(this));
    treeview.resetBtnToggle();
  });

  // Add sub level
  $(".js-treeview").on("click", ".level-sub", function() {
    treeview.addSubLevel($(this));
    treeview.resetBtnToggle();
  });
    // Remove Level
  $(".js-treeview").on("click", ".level-remove", function() {
    treeview.removeLevel($(this));
  }); 

  // Selected Level
  $(".js-treeview").on("click", ".level-title", function() {
    let isSelected = $(this).closest("[data-level]").hasClass("selected");
    !isSelected && $(this).closest(".js-treeview").find("[data-level]").removeClass("selected");
    $(this).closest("[data-level]").toggleClass("selected");
  }); 
});
</script>


 
  
</html>
